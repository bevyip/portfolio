<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Beverly Yip | Portfolio</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../../img/logo-light.png">

    <!-- Typography System -->
    <link rel="stylesheet" href="../../css/typography.css">

    <!-- Navbar Component CSS -->
    <link rel="stylesheet" href="../../nav/nav.css">

    <!-- Footer Component CSS -->
    <link rel="stylesheet" href="../../nav/footer.css">

    <!-- Project-Specific Styles -->
    <link rel="stylesheet" href="../../css/fortune-wizard.css">

    <!-- Material-UI Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>

<body>
    <!-- Header with Navbar -->
    <header>
        <!-- Include the navbar component -->
        <div id="nav-bar"></div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-container">
            <div class="hero-content">
                <div class="hero-left">
                    <h1 class="hero-title text-animate">FORTUNE TELLING WIZARD</h1>
                    <div class="hero-meta">
                        <div class="meta-item text-animate">
                            <span class="meta-label">ROLE</span>
                            <span class="meta-value">Software Engineer</span>
                        </div>
                        <div class="meta-item text-animate">
                            <span class="meta-label">DURATION</span>
                            <span class="meta-value">December 2024 (2 weeks)</span>
                        </div>
                        <div class="meta-item text-animate">
                            <span class="meta-label">TOOLS</span>
                            <span class="meta-value">p5.js, OpenAI API, HTML, CSS, JavaScript</span>
                        </div>
                    </div>
                </div>
                <div class="hero-right">
                    <div class="hero-summary text-animate">
                        <p>The Fortune Telling Wizard draws inspiration from traditional Chinese fortune-telling
                            practices, particularly <i>Bazi</i> (Four Pillars of Destiny), and translates them into an
                            interactive, web-based experience. Influenced by a collaborative physical computing project
                            that I was working on at the same time, this mini version utilizes p5.js and OpenAI API to
                            capture the mystical essence of Chinese fortune-telling in a user-friendly digital format.
                        </p>
                        <div class="hero-tags text-animate">
                            <span class="tag">Web</span>
                            <span class="tag">UX/UI</span>
                            <span class="tag">Interactive Art</span>
                            <span class="tag">Creative Coding</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hero-visuals fade-in">
                <img src="../../img/fall2024/fortune-telling/fortune-wizard-banner.png"
                    alt="Fortune Telling Wizard Interface" class="hero-image">
            </div>
        </div>
    </section>

    <!-- Project Overview Section -->
    <section class="project-overview">
        <div class="overview-container">
            <div class="overview-content">
                <div class="overview-left fade-in">
                    <h2 class="overview-title">What is Fortune Telling Wizard?</h2>
                    <p class="overview-description">
                        The application invites users to enter their name, birth year, and a question to receive a
                        fortune rooted in Bazi principles. Designed with a whimsical and playful tone, the project
                        blends cultural elements with modern interaction design, using visuals, music, and AI to create
                        a personalized experience.
                    </p>
                </div>
                <div class="overview-right fade-in">
                    <h2 class="overview-title">My Role</h2>
                    <p class="overview-description">
                        I designed and developed this web application from concept to deployment, handling the complete
                        development lifecycle. This included user experience research, frontend development with p5.js,
                        custom OpenAI API integration, responsive design, and API optimization.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <div class="features-container">
            <h2 class="process-title fade-in">Key Features & Implementation</h2>

            <!-- Feature 1: Immersive Introduction -->
            <div class="feature-item fade-in">
                <h3 class="process-subtitle">Immersive Introduction</h3>
                <p class="process-description">Key inputs include the user's name, birth year, and a personalized
                    question. The starry, animated background sets an ethereal, contemplative tone. A golden rainbow-arc
                    header titled "Fortune Telling Wizard" focuses attention and aligns with themes of prosperity.</p>
            </div>

            <!-- Feature 2: Enhanced User Experience -->
            <div class="feature-item fade-in">
                <h3 class="process-subtitle">Enhanced User Experience</h3>
                <p class="process-description">Mysterious looping guitar music auditory layer complements the visual
                    storytelling, adding depth and mystique. Subtle user experience details, like dynamic cursor changes
                    on buttons and hover animations. Implemented a gradual text reveal mechanism, mimicking the
                    unfurling of a scroll, to build suspense and enhance the immersive nature of the fortune-telling
                    experience.</p>
                <div class="feature-image fade-in">
                    <img src="../../img/fall2024/fortune-telling/fortune-wizard-gif.gif"
                        alt="Fortune Wizard Interface Demo">
                </div>
            </div>

            <!-- Feature 3: OpenAI API Integration -->
            <div class="feature-item fade-in">
                <h3 class="process-subtitle">OpenAI API Integration</h3>
                <p class="process-description">Integrated OpenAI API to generate personalized, whimsical fortune-telling
                    responses, guiding the AI with a custom system prompt to adopt the role of a Chinese Taoist
                    fortune-teller. Ensured outputs adhered to specific formatting, including "As you were born in the
                    year of..." and elements from <em>Bazi</em>, while incorporating randomness.</p>

                <!-- Code Viewing Section -->
                <div class="code-container fade-in">
                    <button class="code-toggle-btn" onclick="toggleCode()">
                        <span class="code-text">View Code</span>
                        <span class="material-icons code-icon">code</span>
                    </button>
                    <div class="code-block" id="codeBlock" style="display: none;">
                        <code>
 async function getText() {
     const userName = nameInput.value().trim();
     const userBirthYear = birthYearSelect.value();
     const capitalizedUserName = userName
         .split(" ")
         .map((word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()) 
         .join(" ");
     const userQuestion = questionInput.value().trim();
         
     if (!userName || !capitalizedUserName ||userName.length <= 0 ||
         !userQuestion || userQuestion.length <= 0) {
             alert("Please fill in all fields.");
             return;
         }
         
     messages.push({
     role: "user",
     content: `My name is ${capitalizedUserName}, I was born in ${userBirthYear}, and I want to know: ${userQuestion}.`,});

     let options = {
     method: "POST",
     headers: {
         "Content-Type": "application/json",
         Authorization: `Bearer ${API_KEY}`,
     },
     body: JSON.stringify({
         model: "gpt-3.5-turbo",
         messages: messages,
         temperature: 0.7,
     }),
     };

     try {
         let data = await fetchWithBackoff(url, options);
     
         if (data.choices && data.choices[0]) {
             const assistantResponse = data.choices[0].message.content;
             let formattedResponse = `Ah, ${capitalizedUserName}. That's a very good question. ${assistantResponse}`;
     
             messages.push({ role: "assistant", content: formattedResponse });
     
             myOutput.show();
             typeOutResponse(formattedResponse);
         }
     } catch (error) {
     console.error("Failed to fetch response:", error);
     alert("Sorry, something went wrong. Please try again later.");
     }
 }
                        </code>
                    </div>
                </div>
            </div>

            <!-- Feature 4: Typography -->
            <div class="feature-item fade-in">
                <h3 class="process-subtitle">Typography & Visual Design</h3>
                <p class="process-description"><em>MedievalSharp</em> evokes ancient scrolls and mystical texts.
                    <em>Cinzel</em> provides Roman elegance and ceremonial gravitas. Together they create an authentic
                    fortune-telling atmosphere that feels both mystical and trustworthy.
                </p>
                <div class="feature-image fade-in">
                    <img src="../../img/fall2024/fortune-telling/fonts.png" alt="Typography and Font Examples">
                </div>
            </div>
        </div>
    </section>

    <!-- Tools & Frameworks Section -->
    <section class="tools-section">
        <div class="tools-container">
            <h2 class="process-title fade-in">Tools & Frameworks</h2>
            <ul class="tools-list fade-in">
                <li>Developed using p5.js to create an interactive and visually engaging canvas experience.</li>
                <li>Integrates OpenAI API to deliver personalized, dynamic, and contextually relevant fortune-based
                    responses.</li>
                <li>Customized responsive, user-centric design through CSS and HTML to enhance visual aesthetics and
                    ensure seamless interaction across devices.</li>
            </ul>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="cta-container">
            <div class="cta-content fade-in">
                <a class="cta-button" href="https://editor.p5js.org/bevyip/full/Mhl0_kBRo" target="_blank">
                    <span class="cta-text">Ready to discover your fortune? Try the Fortune Telling Wizard!</span>
                    <span class="material-icons cta-icon">auto_fix_high</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Include the reusable footer component -->
    <div id="footer-placeholder"></div>

    <!-- Navigation Component Scripts -->
    <script src="../../js/cursor.js"></script>
    <script src="../../nav/nav.js"></script>
    <script src="../../nav/footer.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Load navigation components using the same approach as main index.html
            loadNavigationComponents();

            // Initialize navbar functionality
            if (window.initializeNavbar) {
                window.initializeNavbar();
            }

            // Initialize footer functionality
            if (window.initializeFooter) {
                window.initializeFooter();
            }

            // Handle text animations for hero section
            const textAnimateElements = document.querySelectorAll('.text-animate');
            textAnimateElements.forEach((el, index) => {
                setTimeout(() => {
                    el.classList.add('animate-in');
                }, index * 100);
            });

            // Set up intersection observer for fade-in elements
            const fadeInElements = document.querySelectorAll(".fade-in");

            const observerOptions = {
                root: null,
                threshold: 0.1,
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("visible");
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            fadeInElements.forEach((el) => observer.observe(el));
        });

        // Function to load navigation components - updated to match main index.html exactly
        async function loadNavigationComponents() {
            try {
                // Load navigation
                const navResponse = await fetch('../../nav/nav.html');
                const navHtml = await navResponse.text();
                document.getElementById('nav-bar').innerHTML = navHtml;

                // Load footer
                const footerResponse = await fetch('../../nav/footer.html');
                const footerHtml = await footerResponse.text();
                document.getElementById('footer-placeholder').innerHTML = footerHtml;

                // Update logo path for fortune wizard project
                const logoImg = document.querySelector('.nav-brand img');
                if (logoImg) {
                    logoImg.src = '../../img/logo.png';
                }

                // Initialize navbar functionality after loading
                if (window.initializeNavbar) {
                    window.initializeNavbar();
                }
            } catch (error) {
                console.error('Error loading navigation components:', error);
            }
        }

        // Code toggle functionality
        function toggleCode() {
            const codeBlock = document.getElementById('codeBlock');
            const button = document.querySelector('.code-toggle-btn');
            const codeText = button.querySelector('.code-text');

            if (codeBlock.style.display === 'none') {
                codeBlock.style.display = 'block';
                codeText.textContent = 'Hide Code';
            } else {
                codeBlock.style.display = 'none';
                codeText.textContent = 'View Code';
            }
        }
    </script>
</body>

</html>