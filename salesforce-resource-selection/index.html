<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Beverly Yip | Portfolio</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../img/logo-light.png">

  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="../css/typography.css">
  <link rel="stylesheet" href="../nav/nav.css">
  <link rel="stylesheet" href="../nav/footer.css">
  <link rel="stylesheet" href="../css/resource-selection.css">

</head>

<body>
  <!-- Progress Bar -->
  <div id="progress-bar"></div>

  <header>
    <!-- Include reusable navbar -->
    <div id="navbar-placeholder"></div>
  </header>

  <!-- New Hero Section (Confido-style) -->
  <section class="hero-section">
    <div class="hero-container">
      <div class="hero-content">
        <div class="hero-left">
          <h1 class="hero-title text-animate">IMPROVING SALESFORCE'S RESOURCE MENU ACCESSIBILITY</h1>
          <div class="hero-meta">
            <div class="meta-item text-animate">
              <span class="meta-label">ROLE</span>
              <span class="meta-value">Software Engineer</span>
            </div>
            <div class="meta-item text-animate">
              <span class="meta-label">DURATION</span>
              <span class="meta-value">Aug — Sep 2022 (1 Month)</span>
            </div>
            <div class="meta-item text-animate">
              <span class="meta-label">TOOLS</span>
              <span class="meta-value"> Salesforce Lightning Design System, ARIA Standards, Javascript, HTML, CSS,
                Accessibility Testing Tools</span>
            </div>
          </div>
        </div>
        <div class="hero-right">
          <div class="hero-summary text-animate">
            <p>A comprehensive redesign and refactor of Salesforce Flow Builder's Resource Menu that prioritizes
              keyboard
              accessibility and user productivity. The project transformed an outdated, disorganized interface into an
              intuitive, accessible experience that meets WCAG 2.1 standards while maintaining user familiarity with
              existing workflows.</p>
            <div class="hero-tags text-animate">
              <span class="tag">Web</span>
              <span class="tag">Component Design</span>
              <span class="tag">Accessibility</span>
              <span class="tag">UX/UI</span>
            </div>

            <!-- Scroll to Prototype Button -->
            <div class="hero-scroll-button-container">
              <button class="hero-scroll-button clickable" onclick="scrollToSolution()">
                <span class="button-text">Skip to Solution</span>
                <span class="button-text-hidden">Skip to Solution</span>
                <span class="material-icons button-arrow">arrow_downward</span>
                <span class="material-icons button-arrow-hidden">arrow_downward</span>
              </button>
            </div>

          </div>
        </div>
      </div>
      <div class="hero-visuals fade-in">
        <img src="../img/resource-selection/thumbnail.png" alt="Salesforce Flow Builder Resource Selection Redesign"
          class="hero-image">
      </div>
    </div>
  </section>

  <!-- Project Overview Section -->
  <section class="project-overview">
    <div class="overview-container">
      <div class="overview-content">
        <div class="overview-left fade-in">
          <h2 class="overview-title">Project Overview</h2>
          <p class="overview-description">
            Flow Builder is Salesforce's low-code automation platform enabling visual workflow creation (see <a
              href="../salesforce-canvas-enhancements/" class="content-link">Case Study #1</a>). This project focused on
            implementing keyboard navigation for the Resource Menu's comprehensive redesign — transforming an outdated,
            disorganized interface into an intuitive, accessible experience.
          </p>
        </div>
        <div class="overview-right fade-in">
          <h2 class="overview-title">My Role</h2>
          <p class="overview-description">
            I led the technical implementation of keyboard navigation for the redesigned Resource Menu, and drove
            component refactoring and cross-functional collaboration to ensure WCAG 2.1 compliance while maintaining
            user workflow consistency and enterprise performance standards.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Outcome Section -->
  <section class="outcome-section">
    <div class="outcome-container">
      <h3 class="section-subtitle">Outcome</h3>
      <div class="outcome-metrics">
        <div class="metric-item">
          <span class="metric-number" data-target="97">0%</span>
          <span class="metric-label">user satisfaction rating</span>
        </div>
        <div class="metric-item">
          <span class="metric-number" data-target="61">0%</span>
          <span class="metric-label">reduction in navigation time</span>
        </div>
        <div class="metric-item">
          <span class="metric-number" data-target="100">0%</span>
          <span class="metric-label">keyboard-only user support</span>
        </div>
      </div>
    </div>
  </section>

  <div class="disclaimer fade-in">
    <i class="fa fa-info-circle" aria-hidden="true"></i>
    <p>Due to a Non-Disclosure Agreement, information on this project is limited.
    </p>
  </div>

  <!-- Context Section -->
  <section class="context-section">
    <div class="context-container">
      <h3 class="section-subtitle fade-in">Context</h3>
      <p class="context-problem fade-in">
        Accessible workflow tools are fundamental to inclusive enterprise software.
      </p>
      <p class="context-subtext fade-in">
        Flow Builder serves thousands of enterprise users who depend on efficient resource access for business
        automation workflows. With growing emphasis on digital accessibility compliance and inclusive design practices,
        ensuring that core interface components meet accessibility standards has become critical for user adoption and
        organizational compliance requirements.
      </p>
      <div class="context-image fade-in">
        <img src="../img/resource-selection/context.png"
          alt="Context visualization of Flow Builder accessibility challenges and enterprise user needs">
        <span class="image-label">1 — Context</span>
      </div>
    </div>
  </section>

  <!-- Problems Section -->
  <section class="problems-section">
    <div class="problems-container">
      <h3 class="section-subtitle fade-in">Problems</h3>

      <div class="problem-item fade-in">
        <h4 class="problem-title">Outdated Resource Menu Design</h4>
        <p class="problem-description">
          The original Resource Menu suffered from poor organization and dated visual design. Users struggled with
          unclear icons, disorganized menu items, and confusing multi-layered navigation that made it difficult to find
          resources or backtrack efficiently.
        </p>
        <div class="problem-image">
          <img src="../img/resource-selection/problem-2.png"
            alt="Screenshot of the old, outdated Resource Menu design showing poor organization and unclear navigation">
          <span class="image-label">2.1 — Old Resource Menu</span>
        </div>
      </div>

      <div class="problem-item fade-in">
        <h4 class="problem-title">Keyboard Navigation Incompatibility</h4>
        <p class="problem-description">
          The design team provided a redesigned Resource Menu that improved visual organization and user experience.
          However, the new design introduced headers, footers, and complex nested structures that were incompatible with
          the existing keyboard navigation system.
        </p>
        <div class="problem-image">
          <img src="../img/resource-selection/problem-1.png"
            alt="Screenshot of the new Resource Menu design showing improved visual organization but keyboard navigation challenges">
          <span class="image-label">2.2 — New Resource Menu</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Goal Section -->
  <section class="goal-section">
    <div class="goal-container">
      <h3 class="section-subtitle fade-in">Goal</h3>
      <p class="goal-text fade-in">
        Deliver comprehensive keyboard navigation for the redesigned Resource Menu that maintains user familiarity while
        achieving full WCAG 2.1 accessibility compliance.
      </p>
    </div>
  </section>

  <!-- User Flow Analysis Section -->
  <section class="user-flow-section">
    <div class="user-flow-container">
      <h3 class="section-subtitle fade-in">User Flow Analysis</h3>

      <div class="user-flow-content fade-in">
        <h4 class="user-flow-title">Mapping Critical User Interaction Points</h4>
        <p class="user-flow-description">
          Following <a href="https://www.w3.org/WAI/WCAG21/quickref/" target="_blank" class="w3c-link">W3C accessibility
            guidelines</a> research, I identified and documented three essential focus scenarios
          that form the foundation of comprehensive keyboard navigation. These scenarios represent every possible user
          interaction point within the redesigned Resource Menu structure.
        </p>
        <div class="user-flow-image">
          <img src="../img/resource-selection/user-flow.png"
            alt="User flow analysis showing critical interaction points and focus scenarios for keyboard navigation">
          <span class="image-label">3 — User Flow Analysis</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Delving Into Keyboard Navigation Section -->
  <section class="keyboard-navigation-section">
    <div class="keyboard-navigation-container">
      <h3 class="section-subtitle fade-in">Delving Into Keyboard Navigation</h3>

      <div class="keyboard-navigation-content fade-in">
        <h4 class="keyboard-navigation-subtitle">Collaborating with the UX team, I documented the complete keyboard
          navigation framework through detailed interaction mapping.</h4>
        <p class="keyboard-navigation-description">
          This systematic approach ensured every possible user pathway was accounted for in the accessibility
          implementation.
        </p>

        <div class="keyboard-navigation-image">
          <img src="../img/resource-selection/keyboard-cover.png"
            alt="Detailed keyboard navigation framework showing tabbing order and arrow key interactions">
          <span class="image-label">4 — Keyboard Navigation Framework</span>
        </div>

        <p class="keyboard-navigation-annotation">
          The pink numbered lines represent the tabbing order and the pink dotted arrows represent up/down/left/right
          arrow key interactions.
        </p>

        <p class="keyboard-navigation-description">
          Using this framework, I identified and detailed three essential focus points that form the backbone of the
          accessible navigation system.
        </p>
      </div>
    </div>
  </section>

  <!-- Focus Point 1 Section -->
  <section class="focus-point-section">
    <div class="focus-point-container">
      <h3 class="section-subtitle fade-in">Focus Point 1: The Input Field</h3>

      <div class="focus-point-content fade-in">
        <h4 class="focus-point-subtitle">Initial Menu Interaction</h4>
        <p class="focus-point-description">
          When users first focus on the text input field, the dropdown menu displays automatically with secondary focus
          on the first menu item. Users can select items with <strong>Enter</strong>, navigate into the menu with
          <strong>Tab</strong>, or filter results
          by typing alphanumeric characters.
        </p>

        <div class="focus-point-image">
          <img src="../img/resource-selection/keyboard-1.png"
            alt="Focus Point 1: The Input Field showing initial menu interaction and keyboard navigation">
          <span class="image-label">5 — Focus Point 1: The Input Field</span>
        </div>

        <p class="focus-point-interactions">
          <em>Key interactions: <strong>Enter</strong> selects first item, <strong>Tab</strong> enters menu,
            <strong>arrow keys</strong> trap focus within menu, typing
            filters results.</em>
        </p>
      </div>
    </div>
  </section>

  <!-- Focus Point 2 Section -->
  <section class="focus-point-section">
    <div class="focus-point-container">
      <h3 class="section-subtitle fade-in">Focus Point 2: A Menu Item</h3>

      <div class="focus-point-content fade-in">
        <h4 class="focus-point-subtitle">Menu Navigation & Selection</h4>
        <p class="focus-point-description">
          When focus lands on menu items, users navigate with <strong>↑↓ arrow keys</strong>, jump to footer with
          <strong>Tab</strong>, and traverse
          nested menus using <strong>→</strong> or <strong>Enter</strong> on chevron items. Tooltips are accessible via
          <strong>Cmd/Ctrl + I</strong> with screen reader
          support through <i>aria-describedby</i>.
        </p>

        <div class="focus-point-image">
          <img src="../img/resource-selection/keyboard-2.png"
            alt="Focus Point 2: A Menu Item showing navigation and selection interactions">
          <span class="image-label">6 — Focus Point 2: A Menu Item</span>
        </div>

        <p class="focus-point-interactions">
          <em>Key interactions: <strong>Arrow keys</strong> navigate items, <strong>Tab</strong> jumps to footer,
            <strong>Enter/right arrow</strong> opens submenus,
            <strong>Cmd/Ctrl+I</strong> shows tooltips.</em>
        </p>
      </div>
    </div>
  </section>

  <!-- Focus Point 3 Section -->
  <section class="focus-point-section">
    <div class="focus-point-container">
      <h3 class="section-subtitle fade-in">Focus Point 3: The Footer</h3>

      <div class="focus-point-content fade-in">
        <h4 class="focus-point-subtitle">Footer Navigation Controls</h4>
        <p class="focus-point-description">
          From the footer position, users can return to the last-focused menu item with <strong>Shift + Tab</strong>,
          move to the header
          with <strong>Tab</strong>, or filter menu items by typing alphanumeric characters directly.
        </p>

        <div class="focus-point-image">
          <img src="../img/resource-selection/keyboard-3.png"
            alt="Focus Point 3: The Footer showing navigation controls and interactions">
          <span class="image-label">7 — Focus Point 3: The Footer</span>
        </div>

        <p class="focus-point-interactions">
          <em>Key interactions: <strong>Shift+Tab</strong> returns to menu, <strong>Tab</strong> moves to header, typing
            filters menu items.</em>
        </p>
      </div>
    </div>
  </section>

  <!-- Design Decision Framework Section -->
  <section class="design-decision-section">
    <div class="design-decision-container">
      <h3 class="section-subtitle fade-in">Design Decision Framework</h3>

      <div class="design-decision-content fade-in">
        <p class="design-decision-intro">
          Through mapping these focus scenarios, I found that it revealed a fundamental choice between user familiarity
          and accessibility
          compliance, and required a
          strategic resolution among the engineers, product managers and design team that would impact all keyboard
          users.
        </p>

        <div class="decision-options">
          <div class="decision-option">
            <h4 class="decision-title">User Familiarity Approach</h4>
            <p class="decision-description">
              Maintain v1 behavior by focusing on menu items first, preserving existing user muscle memory and
              minimizing the learning curve.
            </p>
          </div>

          <div class="decision-option">
            <h4 class="decision-title">Accessibility Standards Approach</h4>
            <p class="decision-description">
              Prioritize WCAG 2.1 compliance by focusing on 'New Resource' first, ensuring proper keyboard navigation
              for all users and future-proofing the interface.
            </p>
          </div>
        </div>

        <div class="design-decision-image">
          <img src="../img/resource-selection/wireframe.png"
            alt="Design decision framework showing user familiarity vs accessibility standards approach">
          <span class="image-label">8 — Design Decision Framework</span>
        </div>

        <div class="our-choice">
          <h4 class="choice-title">Our Choice</h4>
          <p class="choice-description">
            We implemented the accessibility-first approach with help popups to guide users through the new navigation,
            reinforcing that enhanced user experience must be equally accessible and intuitive for all users.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Results and Impact Section -->
  <section class="results-impact-section">
    <div class="results-impact-container">
      <h3 class="section-subtitle fade-in">Results and Impact</h3>

      <div class="results-impact-content fade-in">
        <h4 class="results-impact-subtitle">The revamped selection experience not only met but exceeded our customer's
          expectations.</h4>
        <p class="results-impact-description">
          We introduced a redesigned resource menu that significantly improved user experience and highlighted the
          importance of accessibility as part of the Salesforce Winter 2024 release.
        </p>

        <div class="results-images">
          <div class="results-image">
            <img src="../img/resource-selection/resource-exp.png"
              alt="Overview of easier Flow resource selection experience showing friendlier names, improved grouping, helpful tooltips, and clickable breadcrumbs">
            <span class="image-label">9.1 — Results</span>
          </div>

          <div class="results-image">
            <img src="../img/resource-selection/review.png"
              alt="User reviews and feedback showing positive reception of the redesigned resource menu">
            <span class="image-label">9.2 — User Reviews</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Reflection & Key Takeaways Section -->
  <section class="reflection-section">
    <div class="reflection-container">
      <h3 class="section-subtitle fade-in">Reflection & Key Takeaways</h3>

      <div class="reflection-content fade-in">
        <h4 class="reflection-subtitle">True user experience excellence requires engineering accessibility as a core
          feature, not a compliance checkbox.</h4>
        <p class="reflection-description">
          Leading this implementation taught me that accessibility isn't about meeting compliance standards — it's about
          creating genuinely excellent user experiences. By engineering keyboard navigation as a core feature rather
          than retrofitting it later, we delivered an interface that improved usability for everyone, not just keyboard
          users. This project showed me that when accessibility becomes a foundational engineering principle instead of
          a final checklist item, it drives innovation in user experience design rather than limiting it.
        </p>
      </div>
    </div>
  </section>

  <!-- See Next Section -->
  <section class="see-next-section">
    <div class="see-next-container">
      <h3 class="section-subtitle fade-in">See Next</h3>
      <div class="project-cards">
        <a href="../../confido/" class="project-card fade-in">
          <div class="project-image">
            <img src="../../confido/img/thumbnail.png" alt="Confido Project" class="project-thumbnail">
          </div>
          <div class="project-content">
            <h4 class="project-title">Rebuilding Confido's Approval Flow</h4>
            <p class="project-description">
              A case study on a refactored approval flow with smarter logic, clearer audit trails, and a redesigned UI
              for improved usability.
            </p>
          </div>
        </a>

        <a href="../../spring2025/wholefoods/" class="project-card fade-in">
          <div class="project-image">
            <img src="../../img/spring2025/wholefoods/wholefoods-work-thumbnail.png" alt="Whole Foods Project"
              class="project-thumbnail">
          </div>
          <div class="project-content">
            <h4 class="project-title">Whole Foods In-Store Checkout Experience</h4>
            <p class="project-description">
              A case study on streamlining access to the Whole Foods in-store checkout code within the Amazon app for
              a faster, frustration-free experience.
            </p>
          </div>
        </a>

        <a href="../../salesforce-canvas-enhancements/" class="project-card fade-in">
          <div class="project-image">
            <img src="../../img/canvas-enhancements/thumbnail.png" alt="Salesforce Canvas Enhancements"
              class="project-thumbnail">
          </div>
          <div class="project-content">
            <h4 class="project-title">Redesigning Salesforce's Flow Builder</h4>
            <p class="project-description">
              A case study on improving accessibility and user productivity for sight-impaired users in the Salesforce
              Flow Builder.
            </p>
          </div>
        </a>
      </div>
    </div>
  </section>

  <!-- Footer Component -->
  <div id="footer-component"></div>

  <!-- Include reusable component scripts -->
  <script src="../nav/nav.js"></script>
  <script src="../nav/footer.js"></script>
  <script src="../js/cursor.js"></script>

  <script>
    // Progress bar functionality
    function updateProgressBar() {
      const progressBar = document.getElementById("progress-bar");
      if (!progressBar) return;

      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const scrollPercent = (scrollTop / docHeight) * 100;

      // Ensure progress bar doesn't exceed 100%
      const clampedPercent = Math.min(scrollPercent, 100);
      progressBar.style.width = `${clampedPercent}%`;
    }

    // Throttled scroll handler for progress bar
    let ticking = false;
    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(() => {
          updateProgressBar();
          ticking = false;
        });
        ticking = true;
      }
    }

    // Add scroll event listener for progress bar
    window.addEventListener("scroll", requestTick, { passive: true });

    // Load reusable components
    document.addEventListener("DOMContentLoaded", function () {
      // Load navbar
      fetch('../nav/nav.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('navbar-placeholder').innerHTML = data;

          // Update logo path for resource selection project
          const logoImg = document.querySelector('.nav-brand img');
          if (logoImg) {
            logoImg.src = '../img/logo.png';
          }

          if (typeof initializeNavbar === 'function') {
            initializeNavbar();
          }
          // Re-run cursor effects after navbar is loaded
          if (typeof addCursorEffects === 'function') {
            setTimeout(addCursorEffects, 100);
          }
        });

      // Load the footer component
      fetch('../nav/footer.html')
        .then(response => response.text())
        .then(html => {
          document.getElementById('footer-component').innerHTML = html;
          // Initialize footer functionality after loading
          initializeFooter();
          // Re-run cursor effects after footer is loaded
          if (typeof addCursorEffects === 'function') {
            setTimeout(addCursorEffects, 100);
          }
        })
        .catch(error => {
          console.error('Error loading footer:', error);
        });
    });

    // Text animation for hero section
    document.addEventListener("DOMContentLoaded", function () {
      const textElements = document.querySelectorAll('.text-animate');

      const animateText = () => {
        textElements.forEach((element, index) => {
          setTimeout(() => {
            element.classList.add('animate-in');
          }, index * 100);
        });
      };

      // Animate text on page load
      animateText();
    });

    // Fade-in animations for content sections
    document.addEventListener("DOMContentLoaded", function () {
      const fadeInElements = document.querySelectorAll('.fade-in');

      const observerOptions = {
        root: null,
        threshold: 0.1,
      };

      const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, observerOptions);

      fadeInElements.forEach((el) => observer.observe(el));
    });

    function scrollToSolution() {
      const solutionSection = document.querySelector('.results-impact-section');
      if (solutionSection) {
        solutionSection.scrollIntoView({ behavior: 'smooth' });
      }
    }

    // Animated metrics for outcome section
    document.addEventListener("DOMContentLoaded", function () {
      // Counter animation for metric numbers
      function initCounterAnimation() {
        const metricNumbers = document.querySelectorAll(".metric-number");

        const counterObserver = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                animateCounter(entry.target);
                counterObserver.unobserve(entry.target); // Only animate once
              }
            });
          },
          {
            threshold: 0.1,
            rootMargin: "0px 0px -50px 0px",
          }
        );

        metricNumbers.forEach((metric) => {
          counterObserver.observe(metric);
        });
      }

      function animateCounter(element) {
        // Get target number from data attribute
        const targetNumber = parseInt(element.getAttribute("data-target"));
        const duration = 1500;
        const steps = 30;
        const stepDuration = duration / steps;
        let currentStep = 0;

        // Always start from 0
        element.textContent = "0";

        const timer = setInterval(() => {
          currentStep++;
          const progress = currentStep / steps;
          const currentNumber = Math.floor(targetNumber * progress);

          // Update the element with the current number
          if (targetNumber >= 1000) {
            // For years like 2024, don't add % or other suffixes
            element.textContent = currentNumber;
          } else {
            // For percentages, add the % symbol
            element.textContent = currentNumber + "%";
          }

          if (currentStep >= steps) {
            // Animation complete, ensure we end at the exact target number
            if (targetNumber >= 1000) {
              element.textContent = targetNumber;
            } else {
              element.textContent = targetNumber + "%";
            }
            clearInterval(timer);
          }
        }, stepDuration);
      }

      // Initialize counter animation
      initCounterAnimation();

      // Also initialize after navbar loads
      setTimeout(() => {
        initCounterAnimation();
      }, 500);
    });

    // See Next section scroll-driven card positioning
    function initProjectCardScrollAnimation() {
      const projectCards = document.querySelectorAll(".project-card");
      const seeNextSection = document.querySelector(".see-next-section");

      if (!projectCards.length || !seeNextSection) return;

      function updateCardPositions() {
        const projectCards = document.querySelectorAll(".project-card");
        const seeNextSection = document.querySelector(".see-next-section");
        const projectCardsContainer = document.querySelector(".project-cards");

        if (!projectCards.length || !seeNextSection || !projectCardsContainer)
          return;

        // Disable transitions for smooth scroll-driven positioning on large screens
        if (window.innerWidth > 1024) {
          projectCards.forEach((card) => {
            card.style.transition = "none";
          });
        }

        const sectionRect = seeNextSection.getBoundingClientRect();
        const sectionTop = sectionRect.top;
        const sectionHeight = sectionRect.height;
        const viewportHeight = window.innerHeight;

        // Calculate scroll progress through the section (0 to 1)
        let scrollProgress = 0;

        // Only start animation when section is actually in view
        if (sectionTop < viewportHeight && sectionTop > -sectionHeight) {
          // Section is in view, calculate progress
          const visibleHeight = viewportHeight - sectionTop;
          scrollProgress = Math.min(visibleHeight / (sectionHeight + 200), 1); // +200 for extra scroll room
        }

        // Only calculate gap for horizontal spread layout (large screens)
        if (window.innerWidth > 1024) {
          // Gradually restore gap as cards spread out
          const finalGap = 32; // var(--spacing-xl) = 32px
          const currentGap = finalGap * scrollProgress;
          projectCardsContainer.style.gap = `${currentGap}px`;
        }

        // Apply positioning based on scroll progress
        // Cards start overlapping in center and spread out to final positions
        // On medium screens and below, cards use simple flexbox layout
        if (window.innerWidth <= 1024) {
          // Simple flexbox layout for medium screens and below
          projectCards.forEach((card) => {
            card.style.transform = "none";
            card.style.position = "relative";
            card.style.left = "auto";
            card.style.width = "100%"; // Take full width of their column
            // Re-enable transitions for hover effects
            card.style.transition = "";
          });
          projectCardsContainer.style.flexDirection = "column";
          projectCardsContainer.style.alignItems = "center";
          projectCardsContainer.style.gap = "var(--spacing-xl)"; // Use CSS gap
        } else {
          // Complex scroll-driven spread animation for large screens only
          // Reset any inline styles that might interfere with row layout
          projectCards.forEach((card) => {
            card.style.width = ""; // Remove inline width to let CSS take over
            card.style.position = "absolute";
            card.style.left = "50%";
            // Temporarily disable transitions for smooth scroll-driven positioning
            card.style.transition = "none";
          });

          projectCards.forEach((card, index) => {
            if (index === 0) {
              // Left card - starts at center, moves to left
              const spreadDistance = Math.min(500, window.innerWidth * 0.3);
              const translateX = -spreadDistance * scrollProgress;
              card.style.transform = `translateX(-50%) translateX(${translateX}px)`;
            } else if (index === 1) {
              // Center card - stays at center
              card.style.transform = "translateX(-50%)";
            } else if (index === 2) {
              // Right card - starts at center, moves to right
              const spreadDistance = Math.min(500, window.innerWidth * 0.3);
              const translateX = spreadDistance * scrollProgress;
              card.style.transform = `translateX(-50%) translateX(${translateX}px)`;
            }
          });
          projectCardsContainer.style.flexDirection = "row";
        }
      }

      // Update on scroll
      window.addEventListener("scroll", throttle(updateCardPositions, 16)); // 60fps

      // Update on resize to maintain responsive positioning
      window.addEventListener("resize", throttle(updateCardPositions, 100));

      // Calculate and set equal heights for all cards
      function setEqualCardHeights() {
        const projectCards = document.querySelectorAll(".project-card");
        if (projectCards.length === 0) return;

        // Reset heights to auto to get natural heights
        projectCards.forEach((card) => {
          card.style.height = "auto";
        });

        // Find the tallest card
        let maxHeight = 0;
        projectCards.forEach((card) => {
          const cardHeight = card.offsetHeight;
          maxHeight = Math.max(maxHeight, cardHeight);
        });

        // Apply the max height to all cards
        projectCards.forEach((card) => {
          card.style.height = `${maxHeight}px`;
        });
      }

      // Set equal heights initially and on resize
      setEqualCardHeights();
      window.addEventListener("resize", throttle(setEqualCardHeights, 100));

      // Initial position
      updateCardPositions();
    }

    // Performance optimization: Throttle scroll events
    function throttle(func, limit) {
      let inThrottle;
      return (...args) => {
        if (!inThrottle) {
          func(...args);
          inThrottle = true;
          setTimeout(() => (inThrottle = false), limit);
        }
      };
    }

    // Initialize scroll-driven animation after navbar and footer load
    setTimeout(() => {
      initProjectCardScrollAnimation();
    }, 500);
  </script>
</body>

</html>